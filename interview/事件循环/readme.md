# 事件循环

## 事件循环的意义
    - 由于JS是单线程的，但是在我们的开发过程中呢，我们经常会遇到一些异步任务，比如定时器、ajax请求、DOM事件等。
    - 这些异步任务需要等待一段时间才能够得到结果，如果等待他们的话，就会阻塞整个程序的执行。
    - 所以我们就需要一种机制，能够在等待异步任务的同时，继续执行其他的任务。
    - 这就是事件循环的意义。
## 事件循环的原理
    - 事件循环的原理就是将异步任务放到一个队列中，然后在等待异步任务的同时，继续执行其他的任务。
    - 当异步任务得到结果后，就会将结果放到一个回调队列中，然后事件循环会从回调队列中取出结果，然后执行回调函数。
## 事件循环的实现
    - 在JS中，事件循环的过程就是首先将异步任务放到一个队列中，然后在等待异步任务的同时，继续执行其他的任务。
    - 而异步任务又分为两种，一种是宏任务，一种是微任务。
    - 宏任务包括setTimeout、setInterval、setImmediate、I/O、UI rendering等。
    - 微任务包括Promise、MutationObserver、process.nextTick等。
    - 事件循环的过程就是首先将宏任务放到一个队列中，然后在等待宏任务的同时，继续执行其他的任务。
    - 需要注意的是。process.nextTick的优先级要高于一般的微任务。
## 事件循环的过程
    - 1. 首先将宏任务放到一个队列中并开始执行。第一次的宏任务是script标签。
    - 2. 如果有同步代码，就会先执行同步代码。
    - 3. 如果是宏任务，就会将宏任务放到宏任务队列中。
    - 4. 如果是微任务，就会将微任务放到微任务队列中。
    - 5. 当宏任务执行完毕后，就会将微任务队列中的任务全部执行完毕。
    - 6. 然后再执行下一个宏任务。